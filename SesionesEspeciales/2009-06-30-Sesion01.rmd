---
layout: presentation
title: "Elementos de Estadística con R"
main-class: 'presentaciones'
permalink: /SesionEsp01
tags:

introduction: 
image: <img src="../../SesionesEspeciales/images/logo.png" alt="UdeA" class="sticky">
header-includes:
   - \usepackage{amsmath,amssymb,amsthm,amsfonts}
   - \usepackage[sectionbib]{natbib}
   - \usepackage[hidelinks]{hyperref}
output:
  md_document:
    variant: markdown_strict+backtick_code_blocks+autolink_bare_uris+ascii_identifiers+tex_math_single_backslash
    preserve_yaml: TRUE
always_allow_html: yes   
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding,
  output_dir = "../SesionesEspeciales/_posts/", output_format = "all"  ) })
bibliography: "../referencias.bib"
csl: "../apa.csl"
link-citations: yes
---

```{r knitr_init, echo=FALSE, cache=FALSE}
library(knitr)
## Global options
opts_chunk$set(echo=TRUE,
               cache=TRUE,
               prompt=FALSE,
               tidy=TRUE,
               comment=NA,
               message=FALSE,
               warning=FALSE,
               fig.path = paste0("../SesionesEspeciales/images/", "SesionEsp01"),
               cache.path = "../Poster/cache/",
               cache = FALSE)
```

## Introducción

La Estadística es una **herramienta** ampliamente utilizada en diferentes disciplinas científicas, debido a su gran potencial para **recolectar, analizar, interpretar, estimar y presentar** de forma amigable, la información que se genera en las distintas áreas del conocimiento, para así **poder argumentar y soportar de mejor manera las investigaciones realizadas, y/o mejorar los resultados obtenidos en la toma de decisiones**. 

Adicionalmente, la estadística tiene como ventaja respecto a otras áreas, que permite extraer información de **variables tanto númerida como categórica** de la población de interés o de una muestra de la misma, permitiendo al investigador establecer conclusiones acerca de la misma población, o de alguno de los parámetros que la conforman. Y es debido a ésto, que puede considerarse a la estadística como **uno de los pilares fundamental** dentro de la investigación científica teórica y aplicada.

En general, el análisis estadístico puede dividirse en dos partes:

* La **Estadística descriptiva**, la cual se encarga de resumir la información suministrada mediante el empleo de tablas, gráficas y medidas numéricas, junto con el análisis de las mismas, para facilitar la interpretación y la presentación de la información.
* La **Inferencia estadística**, la cual se encarga de la inferencias, modelamiento y predicción de la información, para facilitar la obtención de conclusiones y toma decisiones.

## La estadística en políticas públicas

**Las políticas públicas tienen como finalidad abordar problemas sociales** que requieren de intervención desde el ámbito público, que tienen como finalizad **gestionar planes, programas o proyectos que permitan dar solución** de la mejor manera a dichos problemas.

Cada una las estrategias que buscan dar solución a los problemas sociales, **requieren de un proceso de evaluación**, cuyo papel puede ser igual o más importante que el objetivo mismo que se desea alcanzar. Ésto debido a que, los proceso de evaluación **permiten analizar la planificación** para retroalimentar el proceso de ejecución **a través de la medición del impacto que generan las políticas** para la comunidad. [@Recchioni2016, p. 162]

**Es aquí donde el análisis estadísitico toma relevancia** dentro de las políticas públicas, puesto que, ésta se emplea como una herramienta indispensable en el análisis cualitativo o cuantitativo de información, siendo dicho procedimiento, una parte escencial en el momento de diseñar planes de evaluación de políticas.

Es debido a lo anterior que, **todo expertos en políticas públicas, debe desarrollar una fuerte fundamentación en análisis de datos**, ya que deben enfrentarse continuamente a problemas que requieren la tomar decisiones, basandos en informes estadísticos descriptivos o inferenciales, que tiene por finalidad apoyar la formulación, implementación, gestión o evaluación de políticas públicas.

## Pre-prosesamiento de datos
La limpieza o pre-procesamiento de los datos **es uno de los aspectos más importantes cuando se desea trabajar con conjuntos de datos**, a tal punto que muchos investigadores aseguran que en este procedimiento puede emplearse regularmente desde el `$50\%$` hasta el `$80\%$` del tiempo total de una investigación.

El objetivo principal de la limpieza de datos, es el **asegurar la calidad de la información** que se usará en los análisis, además de minimizar el riesgo en la toma de decisiones, en base a información perdida, poco precisa, duplicada, contradictoria, errónea o incompleta, ya qué ésta podría influir significativamente en los resultados estadísticos y conclusiones.

Uno de los primeros procedimientos en la limpieza de datos, corresponde en **transformar los datos sin procesar a datos tecnicamente correctos**, y para ello es necesario corregir aquellos problemas que pueden generarse en el momento de realizar la lectura de datos, que pueden impedir o complicar la manipulación de la base de datos. 

Dichos problemas están relacionados con, el hallazgo de carácteres especiales, tipos o clases incorrectos para los conjuntos de datos, datos faltantes, datos duplicados, entre otros.

Ena segunda fase, corresponde en **transformar los datos ténicamente correcto a datos consistentes**, para lograr llevar los datos a una **etapa en la que el conjunto de observaciones están listos para la realización estadística descriptiva e inferencial**.

Este procedimiento consta en solucionar problemas relacionados con datos faltantes o datos duplicados, que inflan la totalidad de la información que se posea.


### Caso de estudio y variables
Como caso de estudio para esta sesión, se propone una base de datos construida a partir del `$10\%$` de la información contenida en el Censo de Edificaciones que posee el DANE para el periodo comprendido entre 2012-2018. Dicha base de datos puede ser descargada desde el siguiente [Link](https://github.com/jiperezga/jiperezga.github.io/raw/master/Dataset/CesoEdificaciones2012-2018.csv){:target="_blank"}. 

Las variables contenidas en la base de datos anterior son:

* **<tt>ANO_CENSO</tt>:** Año al que corresponde la información recolectada en el Censo.
* **<tt>TRIMESTRE</tt>:** Trimestre al que corresponde la información recolectada en el Censo.
* **<tt>REGION</tt>:** Región de acuerdo con las áreas urbanas y metropolitanas en las cuales se realiza la publicación de la información.
  * 5 = Antioquia 
  * 66 = Risaralda 
  * 11 = Bogotá 
  * 63 = Quindío 
  * 76 = Valle 
  * 54 = Norte de Santander 
  * 50 = Meta
  * 8 = Atlántico
  * 41 = Huila
  * 68 = Santander
  * 13 = Bolívar
  * 52 = Nariño
  * 19 = Cauca
  * 73 = Tolima
  * 17 = Caldas
* **<tt>OB_FORMAL</tt>:** Define si la obra cuenta o no con licencia de construcción
  * 1 = Si
  * 2 = No
* **<tt>ESTADO_ACT</tt>:** El estado determina como se encontró la obra al momento del censo y se capta el código correspondiente.
  * 1 = Proceso
  * 2 = Paralizada con información completa
  * 3 = Culminada completa
  * 4 = Paralizada incompleta
  * 5 = Culminada con información incompleta
  * 6 = Demolida
* **<tt>MOVIMIENTO</tt>:** El movimiento es el código de cambio de estado
  * C = Continua
  * I = Inactiva
  * N = Nueva
  * A = Ampliación cobertura
  * R = Reinicia
  * T = Culmina
  * D = Demolida
* **<tt>ESTRATO</tt>:** Clasificación dada por las empresas de servicios públicos. División numérica que caracteriza el entorno socio económico de un espacio geográfico y arquitectónico determinado
  * 1 = Bajo bajo 
  * 2 = Bajo 
  * 3 = Medio bajo
  * 4 = Medio
  * 5 = Medio Alto
  * 6 = Alto
* **<tt>AREATOTZC</tt>:** Área total de zonas comunes cubiertas (incluido garaje y los depósitos o cuartos útiles como: portería, salones comunales, pasillos, etc.).
* **<tt>AREAUNITGA</tt>:** Metros cuadrados de la unidad de garaje (cubiertos).
* **<tt>PRECIOUNIG</tt>:** Valor de las unidades de garaje cubierto en miles de pesos.
* **<tt>TIPOVALOR</tt>:** Tipo de valor de garaje cubierto
  * 1 = Real
  * 2 = Estimado
* **<tt>MANO_OBRAP</tt>:** Corresponde a la cantidad de mano de obra permanente generada en el período intercensal por tipo de mano de obra.
* **<tt>MANO_OBRAT</tt>:** Corresponde a la cantidad de mano de obra temporal generada en el período intercensal por tipo de mano de obra.
* **<tt>AREA_LOTE</tt>:** Corresponde al área del terreno donde se construye la obre o proyecto.
* **<tt>AREAVENDIB</tt>:** Área total vendible (no incluye garaje y los depósitos o cuartos útiles).
* **<tt>NRO_PISOS</tt>:** Número de pisos del destino corresponde al número de pisos que conformarán cada destino que este en proceso de construcción.
* **<tt>GRADOAVANC</tt>:** Grado de avance. Porcentaje de avance de obra del capítulo constructivo.
* **<tt>PRECIOVTAX</tt>:** Precio de venta por M2 del destino, sin incluir garaje, en miles de pesos.
* **<tt>AREAVENUNI</tt>:** Área total vendible por unidad (no incluye garaje y los depósitos o cuartos útiles).
* **<tt>TIPOVIVI</tt>:** Tipo de vivienda hace referencia a si el destino es vivienda de interés social o no. Valor calculado
  * 1 = Vivienda de interés social
  * 2 = Vivienda diferente de VIS
* **<tt>RANVIVI</tt>:** Rango de vivienda, valor calculado
  * 1 = SMLMV < 50
  * 2 = 50 < SMLMV ≤ 70
  * 3 = 70 < SMLMV ≤ 100
  * 4 = 100 < SMLMV ≤ 135
  * 5 = 135 < SMLMV ≤ 350
  * 6 = SMLMV ≥ 350
* **<tt>Destino2</tt>:** Identificación de la obra, según tipo o uso de la edificación, que se está construyendo.
  * 1 = Apartamento
  * 2 = Oficinas
  * 3 = Comercio
  * 4 = Casas
  * 5 = Bodegas
  * 6 = Destinos no comercializables (educación, hoteles, hospitales y centros de salud, administración pública y otros)

### Lectura de datos en <tt>R</tt>
Para realizar la lectura de datos en <tt>R</tt> es necesario conocer la extensión que posee el archivo de interés, debido a que <tt>R</tt> **posee diferentes librerías y funciones que permiten la lectura de bases de datos**. En la siguiente tabla se resume el origen, la extensión, la librería, y la función para cargar cada base de datos dependiendo de su extensión.

<pre style="font-family: 'Open Sans',sans-serif; margin-bottom: -3rem; margin-top: -3rem; font-size: 120%;">
```{r echo=FALSE}
library(kableExtra)

tablita <- cbind(
  "Origen" = c("Texto", "Texto", "Texto",  "Excel", "Excel", "SPSS", "SAS", "STATA"),
  "Extensión" = c(".txt", ".csv (comas)", ".csv (punto y coma)",  ".xls", ".xlsx", ".sav", ".sas7bdat", ".dta"),
  "Librería" = c("utils*", "utils*", "utils*", "readxl", "readxl", "foreign", "foreign", "foreign"),
  "Función" = c("read.table()", "read.csv()", "read.csv2()", "read_xls()", "read_xlsx()", "read.spss()", "read.ssd()", "read.dta()"))

kable(tablita, 
  format = "html", booktabs = T) %>%
kable_styling("striped", full_width = F)

options(scipen = 10)
```
</pre>

**Nota:** Las librerías con * hacen referencia a funciones integradas en <tt>R</tt>, y en consecuencia, no es necesario cargarlas antes de usarlas.

```{r echo=F}
## Este código no se muestra, y es de uso interno de la presentación
datos <- read.csv2("C:/Users/user/Desktop/Repo/pagina de control/Dataset/CesoEdificaciones2012-2018.csv")
```

A modo de ejemplo, suponga que se desea cargar una base de datos de excel con extensión <tt>.xlsx</tt> **mediante la búsqueda del archivo en el ordenador**. En este caso será necesario cargar la librería <tt>readxl</tt> y posteriormente, cargar la base de datos mediante la función <tt>read.xlsx()</tt> que sirve para cargar archivos con extensión xlsx, y la función <tt>file.choose()</tt> que permite buscar el archivo en el ordenador.

```{r eval=F}
## Código de ejemplo NO CORRER
library(readxl)
datos <- read_xlsx(file.choose())
```

Por otro lado, suponga que deseamos cargar una base de datos de STATA con extensión <tt>.dta</tt> **de forma automática**. En este caso será necesario cargar la librería <tt>foreign</tt> y posteriormente, cargar la base de datos mediante la función <tt>read.dta()</tt>, estableciendo la localización en donde se encuentra el archivo en el ordenador.

```{r eval=F}
## Código de ejemplo NO CORRER
library(foreign)
datos <- read.dta("C:/Users/user/Desktop/datos.dta") 
```

Finalmente, suponga que se desea cargar una base de datos de Texto con extensión <tt>.csv</tt>, la cual usa como separador de columnas el punto y coma (;). En este caso será necesario descargar el archivo en una locación temporal, mediante las funciones <tt>tempfile()</tt> y <tt>download.file</tt>, y posteriormente, emplear la función <tt>read.cvs2()</tt>, de la forma

```{r eval=F}
## Código de ejemplo CORRER :D
temp <- tempfile(fileext = ".cvs")  # Crea archivo temporal
URL <- "https://raw.githubusercontent.com/jiperezga/jiperezga.github.io/master/Dataset/CesoEdificaciones2012-2018.csv"  # URL base de datos
download.file(URL, destfile = temp, mode = "wb")  # Descarga archivo en el archivo temporal creado
datos <- read.csv2(temp)
```

### Limpieza de datos (Datos sin procesar a datos ténicamente correctos)
#### Corrección encabezados en <tt>R</tt>
En muchas ocasiones, podemos enfrentarnos a bases de datos que **poseen problemas en el nombre de los encabezados**, asociados caracteres especiales tales como <tt>! " # $ % & ' ( ) * + , - . / : ; < = > ? @ [ ] ^ _ ` { | } ~</tt>, o abuso de letras mayúsculas en los encabezados, entre otros.

Por ello **es necesario luego de cargar la base de datos, verificar si tales problemas existen para poder corregirlos de alguna manera**. A pesar de que en nuestro caso, no hay problemas de carácteres especiales poseemos el problema del abuso de letras mayúsculas en el nombre de las variables, lo cual podría ser tedioso en la programación, debido a que <tt>R</tt> diferencia entre carácteres en mayúscula y minúscula.

Con el fin de darle solución a dicho problema, es posible emplear la función <tt>clean_names()</tt> de la librería <tt>janitor</tt>, con el fin de 

* Analizar las mayúsculas y minúsculas y separadores a un formato consistente.
* Maneja caracteres y espacios especiales.
* Agrega números a nombres duplicados.
* Convierte “%” en “percent” y “#” en “number” para conservar el significado de la variable.

```{r}
# Se observa el nombre de las variables
names(datos)
```

```{r}
# Elimina algunos carácteres especiales y abuso de mayúsculas
library(janitor)
datos <- clean_names(datos)

# Se observa el nombre de las variables
names(datos)
```

#### Corrección contenido de base de datos en <tt>R</tt>
Similar a los encabezados, puede ocurrir que se **encuentren problemas en los valores contenidos dentro de cada variable**, a causa de caracteres especiales o espacios, que puede generar que al transformar las variables se creen categorías extras, o se pierdan datos numéricos.

Para dar solución a dicho problema, se pueden emplear en cojunto las funciones <tt>lapply()</tt> y <tt>gsub()</tt> de la base de <tt>R</tt>, para eliminar carácteres especiales y espacios dentro de la totalidad de la base de datos. Posteriormente, se debe emplear la función <tt>data.frame</tt> para que el conjunto de datos vuelva a tomar la estructura de una base de datos. El código para realizar dicho procedimiento se presenta a continuación.

```{r}
# Elimina carácteres especiales y espacios dentro de la base de datos
datos <- lapply(datos, function(x) gsub("[[:punct:] [:blank:]]","", x))
datos <- data.frame(datos, stringsAsFactors = F)
```

### Tipos de datos
En términos generales, los datos son cualquier pieza de información recolectada del fenómeno que se pretende analizar, y que, dependiendo de las características que posean, deben clasificarse dentro de una determinada categoría.

* **Cuantitativos**: Son datos que pueden ser medidos o cuantificados. Estos se subdividen en dos categorías:
  * **Datos cuantitativos discretos**: Son aquellos datos que provienen de procesos que involucran conteos, y por tanto, solo pueden tomar valores enteros. Por ejemplo: __Edad de una persona, número de estudiantes que perdieron un curso, cantidad de profesores que dictan Estadística I__
  - **Datos cuantitativos continuos**: Son aquellos datos que provienen de procesos que involucran mediciones, y por tanto, solo pueden tomar cualquier valor real dentro de un intervalo. Por ejemplo: __Temperatura de congelación del agua, Tiempo que dura una clase, Utilidad diaria de un negocio.__
* **Cualitativos**: Son datos asociados a una cualidad o propiedad, y por tanto, no pueden representarse numéricamente, a pesar de poder caracterizarse alfanúmericamente. Por ejemplo: __Estrato socioeconómico, tipo de animales en una granja, nivel de satisfacción con el método planteado para dictar el curso.__
* **Lógicos**: Son datos asociados a valores de lógica binaria, usualmente denotados como Verdadero y Falso, o Éxito y Fracaso. Por ejemplo: __Tipo de Sexo, cara de una moneda, probar si un artículo es defectuoso.__

#### Estructura de datos en <tt>R</tt>
**Para observar la estructura de los datos** en <tt>R</tt> puede emplearse la función <tt>str()</tt>, la cual muestra la forma cómo está siendo leída la información contenida en la base de datos por el programa.

```{r}
# Estructura de los datos
str(datos)
```

### Escala de medición
Las escalas o niveles de medición se utilizan para medir variables o atributos que posea un conjunto de datos. A saber, las escalas de medición se dividen en cuatro, **nominal, ordinal, intervalos y razón**. Las dos primeras (nominal y ordinal) se conocen como escalas categóricas usadas conmúnmente para variables cualitativas, mientras que las dos últimas (intervalo y razón) se conocen como escalas numéricas, usadas comúnmente para variables cuantitativas.

* **Nominal**: Son aquellos factores que establecen etiquetas o categorías a los datos, sin estar sujetos a un orden específico. Por ejemplo: __Partido político, Comuna de residencia__
* **Ordinal**: Son aquellos factores que establecen etiquetas o categorías a los datos, junto a una estructura jerárquica. Por ejemplo: __Nivel de una enfermedad, Grado de escolaridad__
* **Intervalo**: Son aquellas mediciones cuantitativas que establecen la distancia entre una medida y otra, en términos de una unidad de medición fija, donde **el cero se selecciona de forma arbitraria y no indica ausencia del tributo**, ni indica conceptos como 'ninguno', 'vacío' o 'nada'. Por ejemplo: __Unidades de medida en centígrados o Fahrenheit__
* **Razón**: Son aquellas mediciones cuantitativas que establece la distancia exacta de una categoría debido a que **el cero es absoluto, no es arbritario, e indica ausencia del atributo**. Por ejemplo __Índice de masa corporal, Salario__

### Coerción de datos en <tt>R</tt>

Muchas veces cuando tenemos una variable, puede que esta no tenga almacenados los datos bajo el tipo que queremos tenerlo realmente, por ello, será necesario transformar (coercionar) cada variable, que permita ajustar la variable a tipo deseado. En <tt>R</tt> existen funciones que permiten redefinir una variable, para transformarlo al tipo que necesitamos. Estás funciones son

* **<tt>as.numeric()</tt>:** Convierte una variable a tipo numérico (double).
* **<tt>as.logical()</tt>:** Convierte una variable a tipo lógico.
* **<tt>as.integer()</tt>:** Convierte una variable a tipo entero.
* **<tt>factor()</tt>:** Convierte una variable a tipo factor asumiendo o no un orden o jerarquía entre los niveles.
* **<tt>as.character()</tt>:** Convierte una variable a tipo carácter (character).
* **<tt>factor()</tt>:** Convierte una variable a tipo factor asumiendo o no un orden o jerarquía entre los niveles.

En nuestro caso, tenemos que todas las variables aparecen como si fuesen variables de tipo carácter, debido al procedimiento de la corrección que se hizo para eliminar carácteres especiales y espacios dentro de la base de datos. En consecuencia, debemos transformar cada variable dependiendo de su estructura y escala de medición.

En sí, tenemos que en primer lugar, las variables <tt>ANO_CENSO, TRIMESTRE, ESTRATO y RANVIVI</tt> son **variables cualitativas ordinales** y por ello deben se transformadas a variables de tipo factor ordinal. En segundo lugar, las variables <tt>REGION, OB_FORMAL, ESTADO_ACT, MOVIMIENTO, TIPOVALOR, TIPOVIVI y Destino2</tt> son **variables cualitativas nominales** y deben ser transformadas a variables de tipo factor. Finalmente, las demás son **variables cuantitativas de razón** que pueden trabajarse como variables de tipo numéricas o enteros.

Para llevar a cabo la transformación, podemos emplear la función <tt>factor()</tt> para realizar el cambio de las **variables cualitativas ordinales**, la función <tt>factor()</tt> para realizar el cambio de las **variables cualitativas nominales** y la función <tt>as.numeric()</tt> para realizar el cambio de las variables a tipo numérica.

```{r}
# Coerción de variable por variable
datos$ano_censo <- factor(datos$ano_censo, ordered = T)
datos$trimestre <- factor(datos$trimestre, ordered = T)
datos$region <- factor(datos$region, levels = c(5, 8, 11, 13, 17, 19, 41, 50, 52, 54,
                                                63, 66, 68, 73, 76),
                       labels = c("Antioquia", "Atlántico", "Bogotá", "Bolívar", "Caldas",
                                  "Cauca", "Huila", "Meta", "Nariño", "Norte de Santander",
                                  "Quindío", "Risaralda", "Santander", "Tolima", "Valle"))
datos$ob_formal <- factor(datos$ob_formal, level = c(1, 2), labels = c("Sí", "No"))
datos$estado_act <- factor(datos$estado_act, level = c(1, 2, 3, 4, 5, 6),
                           labels = c("Proceso", "ParalizadaInfC", "CulminadaInfC",
                                      "ParalizadaInfI", "CulminadaInfI", "Demolida"))
datos$movimiento <- factor(datos$movimiento, levels = c("A", "C", "I", "N", "R", "T"),
                           labels = c("Ampliación", "Continua", "Inactiva",
                                      "Nueva", "Reinicia", "Culmina"))
datos$estrato <- factor(datos$estrato, ordered = T)
datos$areatotzc <- as.numeric(datos$areatotzc)
datos$areaunitga <- as.numeric(datos$areaunitga)
datos$preciounig <- as.numeric(datos$preciounig)
datos$tipovalor <- factor(datos$tipovalor, level = c(0, 1, 2), labels = c("No responde", "Real", "Estimado"))
datos$mano_obrap <- as.numeric(datos$mano_obrap)
datos$mano_obrat <- as.numeric(datos$mano_obrat)
datos$area_lote <- as.numeric(datos$area_lote)
datos$areavendib <- as.numeric(datos$areavendib)
datos$nro_pisos <- as.numeric(datos$nro_pisos)
datos$gradoavanc <- as.numeric(datos$gradoavanc)
datos$preciovtax <- as.numeric(datos$preciovtax)
datos$areavenuni <- as.numeric(datos$areavenuni)
datos$tipovivi <- factor(datos$tipovivi, level = c(1, 2), labels = c("Social", "No Social"))
datos$ranvivi <- factor(datos$ranvivi, ordered = T)
datos$destino2 <- factor(datos$destino2, level = c(1, 2, 3, 4, 5, 6),
                         labels = c("Apartamento", "Oficina", "Comercio", "Casas", "Bodega",
                                    "Otros"))
# Estructura de los datos
str(datos)
```

### Limpieza de datos (Datos ténicamente correctos a datos consistentes)
#### Remover filas o columnas vacías en <tt>R</tt>
Este procedimiento, **permite buscar y eliminar aquellas filas o columnas que se encuentran totalmente vacías** y que pueden de alguna manera inflar la totalidad de información que se posee en la base de datos.

Para ello se emplea la función <tt>remove_empty()</tt> de la librería <tt>janitor</tt>.

```{r}
# Muestra dimensión de filas y columnas antes de la eliminación
dim(datos)
# Elimina filas y columnas que poseen solo valores NA
datos <- remove_empty(datos, which = c("rows", "cols"))
# Muestra dimensión de filas y columnas despues de la eliminación
dim(datos)
```

#### Remover filas duplicadas en <tt>R</tt>
Este procedimiento **se emplea preferiblemente cuando se posee una variable de identificación única**, tal como cédula o nit, que permita comparar cada fila y eliminar solo aquellas que realmente se encuentren duplicadas.

Para eliminar las filas que se encuentren duplicadas, es posible emplear la función <tt>distinct()</tt> de la librería <tt>dplyr</tt>, de la forma.

```{r}
library(dplyr)
# Muestra dimensión de filas y columnas antes de la eliminación
dim(datos)
# Elimina filas que poseen registros duplicados
datos <- distinct(datos)
# Muestra dimensión de filas y columnas despues de la eliminación
dim(datos)
```

#### Detección de datos faltantes en <tt>R</tt>
La detección de datos faltantes radica en localizar para cada variable, si se encuentran casillas vacías, valores especiales, tales como <code style="color: #ff628c!important">Na, NaN</code> o <code style="color: #ff628c!important">NULL</code>.

* **<code style="color: #ff628c!important">NA</code> (Not Available):** Es un carácter especial para indicar valores perdidos. Éstos pueden ser detectados en <tt>R</tt> mediante la función <tt>is.na()</tt>.
* **<code style="color: #ff628c!important">NaN</code> (Not a number):** Es un carácter especial para datos de clase numérica, para indicar un valor asociado a un cálculo cuyo resultado es desconocido, el cual seguramente no es un número. Este puede obtenerse mediante operaciones tales como `$0/0$`, `$Inf/Inf$`, `$Inf-Inf$`. Éstos pueden ser detectados en <tt>R</tt> mediante la función <tt>is.nan()</tt>, aunque también son detectados por la función <tt>is.na()</tt>.
* **<code style="color: #ff628c!important">NULL</code>:** Es un carácter especial para indicar valores indefinidos o indicar la no existencia de valor dentro de la base de datos o de una entrada de la misma. Éstos pueden ser detectados en <tt>R</tt> mediante la función <tt>is.null()</tt>.

Para detectar aquellas filas que se encuentren faltantes dentro de una base de datos, podemos usar una combinación entre las funciones <tt>apply()</tt>, <tt>which()</tt>, tal como se muestra en la siguiente linea de código, adicionando las funciones <tt>is.na()</tt> e <tt>is.null()</tt>, dentro de la función <tt>which()</tt>.

```{r}
## Detectar NA, NaN y NULL dentro de la base de datos
faltantes <- apply(X = datos, MARGIN = 2, FUN = function(x) which(is.na(x) | is.null(x) | x == "Na" | x == "NA" | x == "NaN")) # se pueden agregar más caracteres
faltantes
```

### Exportar datos en <tt>R</tt>
Una vez corregida la base de datos, es posible exportar la información para emplearla posteriormente en <tt>R</tt> o en otros programas. <tt>R</tt> **posee diferentes librerías y funciones que permiten exportar bases de datos** dependiendo de la extensión de interés. En la siguiente tabla se resume el origen, la extensión, la librería, y la función para cargar cada base de datos dependiendo de su extensión.

<pre style="font-family: 'Open Sans',sans-serif; margin-bottom: -3rem; margin-top: -3rem; font-size: 120%;">
```{r echo=FALSE}
library(kableExtra)

tablita2 <- cbind(
  "Origen" = c("Texto", "Texto", "Texto",  "Excel", "SPSS", "SAS", "STATA"),
  "Extensión" = c(".txt", ".csv (comas)", ".csv (punto y coma)",  ".xlsx", ".sav", ".sas7bdat", ".dta"),
  "Librería" = c("utils*", "utils*", "utils*", "openxlsx", "foreign", "foreign", "foreign"),
  "Función" = c("write.table()", "write.csv()", "write.csv2()", "write.xlsx()", "write.foreign()", "write.foreign()", "write.foreign()"))

kable(tablita2, 
  format = "html", booktabs = T) %>%
kable_styling("striped", full_width = F)
```
</pre>

Para mostrar el empleo de estas funciones, suponga que queremos exportar la base de datos en extensión, <tt>.xlsx</tt>. Para ello se emplea entonces la función <tt>write.xlsx()</tt> de la librería <tt>openxlsx</tt>.

```{r eval=FALSE}
library(openxlsx)
## Se escribe el nombre del archivo, junto a la extensión de donde se quiera guardar
write.xlsx(x = datos, "C:/Users/user/Desktop/datos.xlsx")
```

## Estadística descriptiva
En general, la importancia del análisis estadístico radica en la **resolución de problemas vinculados con datos**, siendo la variabilidad de los mísmos, quién guiará la importancia del empleo de diferentes ténicas para el manejo de la información. Desde este punto de vista, se explica en esta sección el método de implementación en <tt>R</tt> de resúmenes de información, resumenes tabulares y gráficos para la presentación de información de forma adecuada, para facilitar la toma de decisiones.

Un aspecto importante a tener en cuenta al realizar análisis estadísticos, es señalado por @Esquivel2016[, p. 29],  el cual menciona que dentro de un análisis con información estadística, se debe tener en cuenta las siguientes etapas: 

1. **Leer entre los datos**: que consiste en llevar a cabo una lectura literal de la información, sin interpretar su contenido).
2. **Leer dentro de los datos**: implica no solamente interpretar los datos sino integrarlos dentro del contexto.
3. **Leer más allá de los datos**: significa tomar los datos como referente para identificar patrones que transciendan el grupo de datos observado, ya sea mediante la interpolación o extrapolación de resultados.
4. **Leer detrás de los datos**: consiste en llevar a cabo un análisis crítico de la información que se estudia, esto implica analizar integralmente el problema, desde su origen, el tipo de dato que se utiliza, su validez y fiabilidad para analizar el problema y la posibilidad de generalizar los hallazgos.

### Resumen numéricos (Variables cuantitativas)
Una parte importante en la estadística descriptiva, son **las medidas estadísticas que tienen por objetivo resumir la información contenida en un conjunto de datos, en pocos valores númericos que representan diferentes características**. Estas medidas estadísticas nos darán información sobre la situación, dispersión, forma, asociación que posee un conjunto de datos de manera que sea posible captar rápidamente la estructura de los mismos.

Las medidas estadísticas que se explicarán en esta sesión podrán ser econtradas en la [Clase 01](../../EstadisticaI/EstIClase01.html#medidas-estadísticas){:target="_blank"} y [Clase 02](../../EstadisticaI/EstIClase02.html#medidas-estadísticas){:target="_blank"} del curso de Estadística I.

**Una alternativa para presentar la información que aportan las medidas estadísticas**, sin tener que realizar el cálculo de cada una de forma individual, **es mediante el empleo de resúmenes numéricos**, los cuales permiten presentar de forma simple, ordenada y simultanea las diferentes medidas que representan el comportamiento de un conjunto de datos.

#### Resumen numérico individual

Entre las diferentes funciones que permiten realizar resúmenes numéricos en <tt>R</tt>, se destaca la función <tt>describe()</tt> de la librería <tt>psych</tt>, que presentan diferentes medidas estadísticas para variables tipo numéricas. 

Suponga que se desea realizar un resumen numérico de la variable <tt>areavenuni</tt> (Área total vendible por unidad). En este caso podríamos emplear la función <tt>describe()</tt> especificando las variables que se desean calcular, de la forma.

```{r}
library(psych)

# resumen numérico mediante librería psych
describe(datos$areavenuni, ranges = TRUE, trim = 0.1, type = 3, quant = c(0.25, 0.75), IQR = TRUE)
```

#### Resumen numérico por grupos

También es posible realizar resúmenes numérico por grupos, en donde, se busca tomar una variable cuantitativa, y discriminarla por una variable cualitativa. Para ello, es posible emplear la función <tt>describeBy</tt> de la librería <tt>psych</tt>, la cual permite establecer una variable de tipo **numerica**, y agrupar los resultados por los niveles de una variable tipo **factor**.

Suponga que se desea realizar un resumen numérico de la variable <tt>areavenuni</tt> (Área total vendible por unidad), discriminando por la variable estrato (estrato socioeconómico de un espacio geográfico). En este caso podríamos emplear la función <tt>describeBy()</tt> especificando las variables que se desean calcular, de la forma.

```{r}
# resumen numérico por grupos mediante librería psych
describeBy(x = datos$areavenuni, group = datos$estrato, ranges = TRUE, trim = 0.1, type = 3, quant = c(0.25, 0.75), IQR = TRUE)
```

### Resumen tabular (Variables cualitativas)

Una forma convencional de presentar resúmenes de variables cualitativas, es mediante la construcción de tablas de frecuencias, las cuales permiten presentar de **forma individual** (una vía) algunas de las características que poseen las variables cualitativas, o de **forma conjunta** (dos vías) algunas de las características que comparten dichas variables.

#### Tabla de frecuencias absolutas

Para presentar de forma individual o grupal las características de las variables, puede ser empleada la función <tt>table()</tt> de la base de <tt>R</tt>, la cual agrega la información presentada en de las variables de una forma simple, mediante una tabla que presenta el número **(frecuencia absoluta)** de observaciones que pertenecen a una categoría. Se aconseja que los datos usados dentro de la función <tt>table()</tt> sean de tipo *factor*.

Las tablas de frecuencia pueden ser construida en una o dos vías, es decir, las tablas pueden presentar la frecuencia absoluta de una sola variable, o presentar la frecuencia absoluta del cruce entre dos variables.

Para ilustrar su empleo, suponga que se desea observar el estado en el cual se encontraron las obras al momento de realizar el censo (<tt>estado_act</tt>). Al ser una sola variable, la función <tt>table()</tt> se emplea de la siguiente forma

```{r}
# tabla de frecuencias absolutas una vía
Tunavia <- table(datos$estado_act)
Tunavia
```

Ahora suponga, que se desea observar el cruce que hay entre el año en que se realizó el censo (<tt>ano_censo</tt>) y el estado actual en el cual se encontraron las obras al momento de realizar el censo (<tt>estado_act</tt>). En éste caso, al ser dos variables, la función <tt>table()</tt> debe emplearse de la siguiente manera

```{r}
# tabla de frecuencias absolutas doble vía
Tdosvias <- table(datos$ano_censo, datos$estado_act)
Tdosvias
```

#### Tabla de frecuencias absolutas
Una alternativa para presentar la información contenida dentro de las variables cualitativas, es mediante la presentación de tablas de frecuencias relativas, las cuales muestran **el valor porcentual al que equivale una categoría específica**.

Para la realización de tablas de frecuencias relativas, se emplea la función <tt>prop.table(tabla)</tt> de base de <tt>R</tt>, en donde <tt>tabla</tt> hace referencia a la tabla de frecuencias absolutas creada en la subsección anterior.

Para ilustrar su empleo, suponga que se desea observar el valor porcentual para los diferentes estados en el cual se encontraron las obras al momento de realizar el censo (<tt>estado_act</tt>). Al ser una sola variable, la función <tt>prop.table()</tt> se emplea de la siguiente forma

```{r}
# tabla de frecuencias relativas una vía
Punavia <- prop.table(Tunavia)
Punavia
```

En el mismo hílo, suponga que se desea observar en valores porcentuales, el cruce que hay entre el año en que se realizó el censo (<tt>ano_censo</tt>) y el estado actual en el cual se encontraron las obras al momento de realizar el censo (<tt>estado_act</tt>). En éste caso, al ser dos variables, la función <tt>prop.table()</tt> debe emplearse de la siguiente manera

```{r}
# tabla de frecuencias relativas doble vía
Pdosvias <- prop.table(Tdosvias)
Pdosvias
```

## Análisis gráfico
Otro aspecto importante del análisis descriptivo, es el que se realiza mediante análisis gráfico. **El análisis gráfico es una forma de simplificar lo tedioso y complejo de un conjunto de observaciones**, además de ser una forma más accesible de presentación de la información cuando se tienen muchas variables, puesto que permiten mostrar el comportamiento de los datos presentados, y hacer juicios respecto a su tendencia central, variabilidad, formas, patrones, tendencias, etc.

El análisis gráfico, puede ser dividido en  

* Gráficos para variables cuantitativa
* Gráficos para variables cualitativas
* Gráficos para cruces entre variables cuantitativas y cualitativas

En la siguiente tabla se hace un resumen de qué gráficos pueden ser apropiados para usar en cada uno de los casos

<pre style="font-family: 'Open Sans',sans-serif; margin-bottom: -3rem; margin-top: -3rem; font-size: 120%;">
```{r echo=FALSE}
library(kableExtra)

tablita <- cbind(
  "Una Cuantitativa" = c("Gráfico de caja y bigotes", "Histograma", "Densidad"),
  "Dos Cuantitativa" = c("Diagrama de dispersión", "", ""),
  "Más de Dos Cuantitativas" = c("Matriz de dispersión", "", ""),
  "Una Cualitativa" = c("Gráfico de barras", "Gráfico de pareto", "Gráfico de pastel"),
  "Dos Cualitativas" = c("Gráfico de barras", "Gráfico de balón", ""),
  "Cualitativa - Cuantitativa" = c("Gráfico de caja y bigotes", "Gráfico de medias", ""))

kable(tablita, 
  format = "html", booktabs = T) %>%
kable_styling("striped", full_width = F)

options(scipen = 10)
```
</pre>

### Una variable Cuantitativa

#### Gráfico de caja y bigotes
Este gráfico sirve para presentar de forma visual, datos numéricos a través de sus cuartiles, además de presentar otras **características importantes, tales como el valor de los cuartiles, dispersión, simetría y datos potencialmente atípicos**.

<h4 align="center"> Representación de un Gráfico de Caja y Bigotes </h4>
![](../EstadisticaI/images/BoxPlot.jpg)

Este gráfico puede ser realizado mediante la función <tt>boxplot()</tt> de la librería <tt>graphics</tt> de la base del <tt>R</tt>. 

Suponga que se desea presentar de forma visual, el comportamiento de la variable que corresponde al grado de avance de la obra en contrucción (<tt>gradoavanc</tt>) a partir de el comportamiento de los cuartiles. Para ello, podemos emplear la función <tt>boxplot()</tt> de la forma

```{r}
# Construcción de gráfico de caja y bigotes
boxplot(datos$gradoavanc, horizontal = T, xlab = "Porcentaje de avance (%)", main = "Boxplot del Grado de Avance de la Obra", col = "lightblue")
```

#### Histograma
Este gráfico muestra la distribución de frecuencia o densidades del grupo de observaciones, **brinda información sobre el valor más probables, la dispersión, la asimetría y valores extremos**. Adicionalmente, tiene la ventaja de que su interpretación es muy intuitiva y por tanto es de los gráficos más preferidos para resumir información. Este gráfico puede ser realizado mediante la función <tt>hist()</tt> de la librería <tt>graphics</tt> de la base del <tt>R</tt>.

Suponga que se desea presentar mediante un histograma, el comportamiento de la variable que corresponde al precio de venta por `$m^2$` del inmueble (<tt>preciovtax</tt>). Para ello, podemos emplear la función <tt>hist()</tt> de la forma

```{r}
## Construcción de histograma
hist(datos$preciovtax, main = "Histograma del Precio de venta por M2", xlab = "Precio (en miles de pesos)", col = 8) 
```

#### Densidad
Este gráfico funciona similar al histograma de densidades, con la diferencia de que en lugar de mostrar la distribución mediante clases (barras), éste muestra el comportamiento de la distribución de las observaciones mediante una curva. Dicha curva, **brinda mayor información que el histograma respecto al valor promedio, dispersión y asimetría**. Este gráfico puede ser realizado mediante la combinación de las funciones <tt>plot()</tt> y <tt>density()</tt>, de la forma <tt>plot(density())</tt>, siendo <tt>plot()</tt> y <tt>density()</tt> funciones de las librerías <tt>graphics</tt> y <tt>stats</tt> de la base de <tt>R</tt>. 

Adicionalmente se presenta la función <tt>polygon</tt> de la librería <tt>graphics</tt> de la base de <tt>R</tt>, la cual sirve para generar formas, o en este caso, darle color a la densidad.

Suponga que se desea presentar la densidad, de la variable que corresponde al área total vendible por unidad (<tt>areavenuni</tt>). Para ello, podemos emplear la función <tt>hist()</tt> de la forma

```{r}
## Construcción de la densidad
plot(density(datos$areavenuni, na.rm = T), main = "Gráfico de Densidad para Area Total Vendible", xlab = "Área Total Vendible", lwd = 2) 
# Colorea la densidad
polygon(density(datos$areavenuni, na.rm = T), col = 3) 
```

### Dos variables Cuantitativas

#### Gráfico de dispersión
Este gráfico se emplea para hacer cruces entre dos variables cuantitativas, y **sirve para ver tendencias y relaciones entre dos variables cuantitativas, además de permitir apreciar donde se centra el total de observaciones, y detección de datos atípicos** dados dos atributos cuantitativos. Este gráfico puede ser realizado mediante la función <tt>plot()</tt> de la librería <tt>graphics</tt> de la base del <tt>R</tt>.

Para entender la forma en que se aplica un diagrama de dispersión, suponga que se quiere observar, si éxiste alguna relación entre el área del lote donde se construye la obra o proyecto (<tt>area_lote</tt>) y el precio de venta por `$m^2$` (<tt>preciovtax</tt>). Para ello, podemos emplear la función <tt>plot()</tt> de la forma.

```{r}
plot(x = datos$area_lote, y = datos$preciovtax, xlab = "Área del Lote",
     ylab = "Precio de venta (m2)", main = "Relación entre Área del Lote y Precio de venta m2", pch = 19)
```

### Más de dos variables Cuantitativas

#### Matriz de dispersión
Cuando se poseen más de dos variables cuantitativas, es posible presentar un matriz que muestre el cruce entre pares de variables, mediante cuadros con versiones simples de la función <tt>plot()</tt>. Este gráfico puede ser realizado mediante la función <tt>pairs()</tt> de la librería <tt>graphics</tt> de la base de <tt>R</tt>.

Para ello, suponga que se desea observar la relación que hay entre las variables, área del lote donde se construye la obra o proyecto (<tt>area_lote</tt>), porcentaje de avance de la obra en contrucción (<tt>gradoavanc</tt>) y área total vendible por unidad (<tt>areavenuni</tt>). Para ello empleamos la función <tt>pairs()</tt> de la forma
```{r echo=FALSE, eval=FALSE}
## Matríz de dispersión básica
pairs(cbind(datos$area_lote, datos$gradoavanc, datos$areavenuni), labels = c("Área Lote", "Porcentaje de Avance", "Área Total Vendible"))
```

Funciones complementarias pueden ser desarrolladas para mejorar la visualización los pares de variables. En el libro de @Hernandez2018[, pp. 40-49], se presentan diferentes funciones que pueden ser implementadas. Entre ellas la siguiente función

```{r}
## Matríz de dispersión avanzada
# Función para dibujar la dispersión y agregar la recta de regresión
panel.reg <- function(x, y)
{
  points(x, y, pch=20)
  abline(lm(y ~ x), lwd=2, col='dodgerblue2')
}
# Función para crear el histograma
panel.hist <- function(x, ...)
{
  usr <- par("usr"); on.exit(par(usr))
  par(usr = c(usr[1:2], 0, 1.5) )
  h <- hist(x, plot = FALSE)
  breaks <- h$breaks; nB <- length(breaks)
  y <- h$counts; y <- y/max(y)
  rect(breaks[-nB], 0, breaks[-1], y, col="dodgerblue2", ...)
}
# Función para obtener la correlación
panel.cor <- function(x, y, digits=2, prefix="", cex.cor)
{
  usr <- par("usr"); on.exit(par(usr))
  par(usr = c(0, 1, 0, 1))
  r <- abs(cor(x, y))
  txt <- format(c(r, 0.123456789), digits=digits)[1]
  txt <- paste(prefix, txt, sep="")
  if(missing(cex.cor)) cex <- 0.8
  text(0.5, 0.5, txt, cex = cex)
}

pairs(cbind(datos$area_lote, datos$gradoavanc, datos$areavenuni), labels = c("Área Lote", "Porcentaje de Avance", "Área Total Vendible"), upper.panel = panel.reg, diag.panel = panel.hist, lower.panel = panel.cor)
```

### Una Variable Cualitativa

#### Gráfico de barras
Sirve para resumir una variable cualitativa mediante barras de frecuencias absolutas o relativas. Éste **permite observar la concentración de observaciones en una o más categorías diferentes**. Este gráfico puede ser realizado mediante la función <tt>barplot()</tt> de la librería <tt>graphics</tt> de la base de <tt>R</tt>.

Para ilustrar su empleo, suponga que se desea observar el estado en el cual se encontraron las obras al momento de realizar el censo (<tt>estado_act</tt>). En este caso, la función <tt>barplot()</tt> se emplea de la siguiente forma

```{r}
# Gráfico de barras
tabla1 <- table(datos$estado_ac)
barplot(tabla1, main = "Estado en el cual se encontraron las obras al momento del censo", col = hcl.colors(6)) 
```

#### Gráfico de pareto
Este gráfico es similar al gráfico de barras para una sola variable cualitativa, pero con la ventaja de que **presenta las frecuencias absolutas, relativas, y las frecuencias acumuladas absolutas y acumuladas relativas en el mismo gráfico**. Este gráfico puede ser realizado mediante la función <tt>pareto.chart()</tt> de la librería <tt>qqc</tt>.

Para ilustrar su empleo, suponga que se desea observar el estrato socioeconómico en donde se está realizado la obra (<tt>estrato</tt>). Al ser una sola variable, la función <tt>pareto.chart()</tt> se emplea de la siguiente forma

```{r}
library(qcc)

# Gráfico de pareto
tabla2 <- table(datos$estrato)
pareto.chart(tabla2, main = "Gráfico Pareto por Estrato")
```

#### Gráfico de pastel
Este gráfico también **sirve para representar gráficamente las tablas de frecuencias absolutas y relativas para una variable cualitativa**. A pesar de ser un gráfico muy usado en la práctica, **no muestra bien la información que se desea presentar**, ya que siempre debe estar acompañado de los porcentajes o frecuencias que representa cada área, ya que no hacerlo, dicho gráfico puede ser muy engañoso. 

Este gráfico puede ser realizado mediante la función <tt>pie()</tt> de la librería <tt>graphics</tt> de la base de <tt>R</tt>, y donde, para establecer etiquetas de los porcentajes o frecuencias de cada área, puede establecerse mediante la función <tt>legend()</tt> de la librería <tt>graphics</tt> de la base de <tt>R</tt>.

Empleamos la variable del estado en que se encuentra la obra (<tt>movimiento</tt>) para ilustrar el empleo del gráfico de pastel. En dicho caso, la estructura de la función <tt>pie()</tt> y <tt>legend()</tt> será de la forma

```{r echo=FALSE, eval=FALSE}
# Gráfico de pastel una variable de frecuencias absolutas
tabla3 <- prop.table(table(datos$movimiento))
pie(tabla3, main = "Estado en que se encuentra la obra", col = cm.colors(6))
legend("topleft", legend = paste0(names(tabla3), " (", round(tabla3,4), ")"), fill = cm.colors(6), cex = 0.8)
```

### Dos Variables Cualitativas

#### Gráfico de barras
El gráfico de barras también sirve para resumir dos variable cualitativa mediante barras de frecuencias absolutas o relativas. **La interpretación, será la misma que para una sola variable cualitativa, con la diferencia de que en este caso, se podrán hacer comparaciones por categorías adicionales.** Este gráfico puede ser realizado mediante la función <tt>barplot()</tt> de la librería <tt>graphics</tt> de la base de <tt>R</tt>, junto a la función <tt>legend()</tt>, para establecer las etiquetas asociadas a cada una de las barras que se presenten en el gráfico.

Para ilustrar su empleo, suponga que se desea observar el estado en el cual se encontraron las obras al momento de realizar el censo (<tt>estado_act</tt>), respecto a si la obra cuenta o no con licencia (<tt>ob_formal</tt>). En este caso, la función <tt>barplot()</tt> se emplea junto a la función <tt>legend()</tt> de la siguiente forma

```{r}
# Gráfico de barras
tabla4 <- table(datos$estado_ac, datos$ob_formal)
barplot(tabla4, main = "Estado de la obra respecto a si la obra cuenta o no con licencia", col = hcl.colors(6), beside = T) 
legend("topright", rownames(tabla4), fill = topo.colors(6), cex = 0.8) 
```

#### Gráfico de balón
El gráfico de balón, suele ser un gráfico más avanzado para resumir dos variable cualitativa, en donde **se establecen en el cruce de las dos variables, círculos que se asocian al tamaño del cruce de las dos variables cualitativas**. Este gráfico puede ser realizado mediante la función <tt>ggballoonplot()</tt> de la librería <tt>ggpubr</tt>, la cual depende de la librería <tt>ggplot2</tt>.

Para ilustrar el empleo de la función, suponga que se desea observar el estado en el cual se encontraron las obras al momento de realizar el censo (<tt>estado_act</tt>), respecto al estado en que se encuentra la obra (<tt>movimiento</tt>). En este caso, la función <tt>ggballoonplot()</tt> puede emplearse de la forma

```{r}
library(ggplot2)
library(ggpubr)
theme_set(theme_pubr())

# Gráfico de balón
tabla5 <- data.frame(table(datos$estado_ac, datos$movimiento))
ggballoonplot(tabla5, fill = "value")+
  scale_fill_viridis_c(option = "C")
```

### Cruce entre Variables Cualitativas y Cuantitativas

#### Gráfico de caja y bigotes
Este gráfico sirve para presentar de forma visual, datos numéricos **por categorías** a través de sus cuartiles, además de presentar **otras características importantes, tales como la dispersión, simetría y datos potencialmente atípicos**. Este gráfico puede ser realizado mediante la función <tt>boxplot()</tt> de la librería <tt>graphics</tt> de <tt>R</tt>.

Suponga que se tiene interés en realizar un cruce entre la variable cualitativa que indica si la obra cuenta o no con licencia (<tt>ob_formal</tt>) y la variable cuantitativa del grado de avance de la obra (<tt>gradoavanc</tt>). Para ello, puede emplearse el gráfico de caja y bigotes de la forma
```{r}
# Construcción de gráfico de caja y bigotes por categorías
boxplot(datos$gradoavanc ~ datos$ob_formal, horizontal = T, xlab = "Grado de avance", ylab = "Posee licencia?", main = "Grado de avance respecto a la posesión de licencia", col = terrain.colors(2))
```

#### Gráfico de medias
Este gráfico **sirve para presentar de forma visual, grupos de datos numéricos a través de sus media y desviación estándar**. El gráfico está compuesto por un punto que representa el valor promedio del grupo de observaciones y **las barras representan dos desviación estándar de la media**. En donde, si las barras no se superponen, entonces se tendrá evidencia sólida respecto a que la media de los grupos es diferente.

Este gráfico puede ser realizado mediante la función <tt>plotMeans()</tt> de la librería <tt>RcmdrMisc</tt>. Y para ilustrar su empleo, suponga que se desea observar área total vendible (<tt>areavendib</tt>), respecto al rango de vivienda calculado (<tt>ranvivi</tt>). Ésto se puede realizar mediante la forma

```{r}
library(RcmdrMisc)

## Construcción de diagrama de caja y bigotes por categorías
# Recordar escribir en error.bars = "conf.int" porque por defecto se presenta un intervalo para el error estándar y no para dos desviaciones estándar.
plotMeans(response = datos$areavendib, factor1 = datos$ranvivi, error.bars = "conf.int", xlab = "Estrato", ylab = "Peso (kg)", main = "Área vendible respecto a rangos de vivienda")
```

## Referencias
<h7 id="ref-Recchioni2016"></h7>



